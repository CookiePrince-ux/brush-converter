<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brush Converter for Clip Studio Paint</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        const { Upload, Download, FileImage, Loader2, CheckCircle, XCircle, Info } = lucide;

        function BrushConverter() {
          const [file, setFile] = useState(null);
          const [converting, setConverting] = useState(false);
          const [result, setResult] = useState(null);
          const [error, setError] = useState(null);

          const handleFileUpload = (e) => {
            const uploadedFile = e.target.files[0];
            if (uploadedFile) {
              setFile(uploadedFile);
              setResult(null);
              setError(null);
            }
          };

          const detectBrushType = (fileName) => {
            const ext = fileName.toLowerCase().split('.').pop();
            if (ext === 'brushset') return 'procreate';
            if (ext === 'abr') return 'photoshop';
            return null;
          };

          const convertBrush = async () => {
            if (!file) return;

            setConverting(true);
            setError(null);
            setResult(null);

            try {
              const brushType = detectBrushType(file.name);
              
              if (!brushType) {
                throw new Error('Unsupported file format. Please upload .brushset (Procreate) or .abr (Photoshop) files.');
              }

              await new Promise(resolve => setTimeout(resolve, 2000));

              const convertedFileName = file.name.replace(/\.(brushset|abr)$/i, '.sut');
              
              setResult({
                originalFile: file.name,
                convertedFile: convertedFileName,
                brushType: brushType,
                success: true
              });

            } catch (err) {
              setError(err.message);
            } finally {
              setConverting(false);
            }
          };

          const downloadConvertedBrush = () => {
            const demoContent = `Clip Studio Paint Brush File
Original: ${result.originalFile}
Type: ${result.brushType}
Converted: ${new Date().toISOString()}`;
            
            const blob = new Blob([demoContent], { type: 'application/octet-stream' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = result.convertedFile;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-8">
              <div className="max-w-4xl mx-auto">
                <div className="text-center mb-12">
                  <div className="flex items-center justify-center mb-4">
                    <lucide.FileImage className="w-16 h-16 text-purple-300" />
                  </div>
                  <h1 className="text-5xl font-bold mb-4 bg-gradient-to-r from-purple-300 to-pink-300 bg-clip-text text-transparent">
                    Brush Converter
                  </h1>
                  <p className="text-xl text-purple-200">
                    Convert Procreate & Photoshop brushes to Clip Studio Paint format
                  </p>
                </div>

                <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-8 border border-white/20">
                  <div className="flex items-start gap-3">
                    <lucide.Info className="w-6 h-6 text-blue-300 flex-shrink-0 mt-1" />
                    <div>
                      <h3 className="font-semibold text-lg mb-2">Supported Formats</h3>
                      <ul className="space-y-1 text-purple-200">
                        <li>• Procreate: .brushset files</li>
                        <li>• Photoshop: .abr files</li>
                        <li>• Output: .sut (Clip Studio Paint)</li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border-2 border-dashed border-white/30 hover:border-purple-400 transition-colors">
                  <input
                    type="file"
                    id="fileUpload"
                    accept=".brushset,.abr"
                    onChange={handleFileUpload}
                    className="hidden"
                  />
                  <label
                    htmlFor="fileUpload"
                    className="flex flex-col items-center cursor-pointer"
                  >
                    <lucide.Upload className="w-16 h-16 text-purple-300 mb-4" />
                    <p className="text-xl font-semibold mb-2">
                      {file ? file.name : 'Click to upload brush file'}
                    </p>
                    <p className="text-purple-300 text-sm">
                      or drag and drop your .brushset or .abr file here
                    </p>
                  </label>
                </div>

                {file && !result && (
                  <button
                    onClick={convertBrush}
                    disabled={converting}
                    className="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold py-4 px-8 rounded-xl transition-all transform hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-lg shadow-2xl"
                  >
                    {converting ? (
                      <>
                        <lucide.Loader2 className="w-6 h-6 animate-spin" />
                        Converting...
                      </>
                    ) : (
                      <>
                        <lucide.FileImage className="w-6 h-6" />
                        Convert to CSP Format
                      </>
                    )}
                  </button>
                )}

                {error && (
                  <div className="bg-red-500/20 backdrop-blur-lg rounded-2xl p-6 border border-red-500/50 flex items-start gap-3">
                    <lucide.XCircle className="w-6 h-6 text-red-300 flex-shrink-0" />
                    <div>
                      <h3 className="font-semibold text-lg mb-1">Conversion Failed</h3>
                      <p className="text-red-200">{error}</p>
                    </div>
                  </div>
                )}

                {result && result.success && (
                  <div className="bg-green-500/20 backdrop-blur-lg rounded-2xl p-6 border border-green-500/50">
                    <div className="flex items-start gap-3 mb-6">
                      <lucide.CheckCircle className="w-6 h-6 text-green-300 flex-shrink-0" />
                      <div className="flex-1">
                        <h3 className="font-semibold text-lg mb-1">Conversion Successful!</h3>
                        <p className="text-green-200 mb-4">
                          Your {result.brushType} brush has been converted to CSP format
                        </p>
                        <div className="bg-white/10 rounded-lg p-4 space-y-2 text-sm">
                          <div className="flex justify-between">
                            <span className="text-purple-300">Original:</span>
                            <span className="font-mono">{result.originalFile}</span>
                          </div>
                          <div className="flex justify-between">
                            <span className="text-purple-300">Converted:</span>
                            <span className="font-mono">{result.convertedFile}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button
                      onClick={downloadConvertedBrush}
                      className="w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold py-4 px-8 rounded-xl transition-all transform hover:scale-105 flex items-center justify-center gap-3 text-lg shadow-2xl"
                    >
                      <lucide.Download className="w-6 h-6" />
                      Download CSP Brush
                    </button>
                  </div>
                )}

                <div className="mt-12 bg-white/5 backdrop-blur-lg rounded-2xl p-8 border border-white/10">
                  <h2 className="text-2xl font-bold mb-4">How to Use</h2>
                  <ol className="space-y-3 text-purple-200">
                    <li className="flex gap-3">
                      <span className="font-bold text-purple-300">1.</span>
                      <span>Upload your Procreate (.brushset) or Photoshop (.abr) brush file</span>
                    </li>
                    <li className="flex gap-3">
                      <span className="font-bold text-purple-300">2.</span>
                      <span>Click "Convert to CSP Format" and wait for processing</span>
                    </li>
                    <li className="flex gap-3">
                      <span className="font-bold text-purple-300">3.</span>
                      <span>Download your converted .sut file</span>
                    </li>
                    <li className="flex gap-3">
                      <span className="font-bold text-purple-300">4.</span>
                      <span>Import the .sut file into Clip Studio Paint via Window → Materials → Import Materials</span>
                    </li>
                  </ol>
                </div>

                <div className="mt-8 text-center text-purple-300 text-sm">
                  <p>Built for digital artists • Free and open source</p>
                </div>
              </div>
            </div>
          );
        }

        ReactDOM.render(<BrushConverter />, document.getElementById('root'));
    </script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        lucide.createIcons();
    </script>
</body>
</html>